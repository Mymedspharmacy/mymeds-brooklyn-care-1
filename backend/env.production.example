# ðŸš€ PRODUCTION ENVIRONMENT CONFIGURATION
# Copy this file to .env and fill in your actual values

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
PORT=4000
HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MySQL/PostgreSQL connection string
DATABASE_URL=mysql://username:password@localhost:3306/mymeds_production

# Database connection pool settings
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_POOL_ACQUIRE=30000
DATABASE_POOL_IDLE=10000

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================
# JWT Secret (MUST be at least 32 characters, use a strong random string)
JWT_SECRET=your-super-secure-jwt-secret-here-change-this-in-production-minimum-32-chars

# Admin user credentials (MUST be set in production)
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=YourSecureAdminPassword123!
ADMIN_NAME=System Administrator

# Password policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# Session settings
SESSION_SECRET=another-super-secure-session-secret-here
SESSION_TIMEOUT=900000
JWT_EXPIRES_IN=24h

# =============================================================================
# CORS & SECURITY
# =============================================================================
# Allowed origins (comma-separated)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Security headers
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY_STRICT=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# =============================================================================
# RATE LIMITING
# =============================================================================
# Enable/disable rate limiting
RATE_LIMITING_ENABLED=true

# Rate limit settings (requests per window)
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_AUTH_WINDOW=900000
RATE_LIMIT_API_MAX=100
RATE_LIMIT_API_WINDOW=900000
RATE_LIMIT_CONTACT_MAX=3
RATE_LIMIT_CONTACT_WINDOW=3600000

# =============================================================================
# PAYMENT PROCESSING (STRIPE)
# =============================================================================
# Stripe configuration
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe settings
STRIPE_CURRENCY=usd
STRIPE_PAYMENT_METHODS=card,sepa_debit,sofort
STRIPE_CAPTURE_METHOD=automatic

# =============================================================================
# EMAIL CONFIGURATION (SMTP)
# =============================================================================
# SMTP server settings
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_smtp_username
SMTP_PASS=your_smtp_password
SMTP_FROM=noreply@yourdomain.com

# Email templates
EMAIL_VERIFICATION_ENABLED=true
EMAIL_RESET_PASSWORD_ENABLED=true
EMAIL_NOTIFICATIONS_ENABLED=true

# =============================================================================
# FILE UPLOAD & STORAGE
# =============================================================================
# Upload settings
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf
UPLOAD_PATH=./uploads
UPLOAD_TEMP_PATH=./uploads/temp

# File storage
STORAGE_TYPE=local
STORAGE_LOCAL_PATH=./uploads
STORAGE_S3_BUCKET=your-s3-bucket-name
STORAGE_S3_REGION=us-east-1
STORAGE_S3_ACCESS_KEY_ID=your_s3_access_key
STORAGE_S3_SECRET_ACCESS_KEY=your_s3_secret_key

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log file settings
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs
LOG_FILE_MAX_SIZE=20m
LOG_FILE_MAX_FILES=30d

# Monitoring
MONITORING_ENABLED=true
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
STATUS_MONITOR_ENABLED=true

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
# Backup settings
BACKUP_DATABASE=true
BACKUP_DATABASE_SCHEDULE=0 2 * * *
BACKUP_DATABASE_RETENTION_DAYS=30
BACKUP_DATABASE_COMPRESSION=true
BACKUP_DATABASE_ENCRYPTION=true
BACKUP_ENCRYPTION_PASSWORD=your-backup-encryption-password

BACKUP_FILES=true
BACKUP_FILES_SCHEDULE=0 3 * * *
BACKUP_FILES_RETENTION_DAYS=7
BACKUP_INCLUDE_PATHS=uploads,logs,config
BACKUP_EXCLUDE_PATHS=node_modules,temp,.git

# Backup storage
BACKUP_LOCAL=true
BACKUP_LOCAL_PATH=./backups
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
BACKUP_FTP_HOST=your-ftp-host
BACKUP_FTP_PORT=21
BACKUP_FTP_USERNAME=your-ftp-username
BACKUP_FTP_PASSWORD=your-ftp-password
BACKUP_FTP_PATH=/backups

# =============================================================================
# PERFORMANCE & CACHING
# =============================================================================
# Cache settings
CACHE_ENABLED=true
CACHE_TTL=300000
CACHE_MAX_SIZE=1000
CACHE_CLEANUP_INTERVAL=300000

# Database query optimization
DB_QUERY_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_QUERY_CACHE_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# WooCommerce integration
WOOCOMMERCE_URL=https://yourdomain.com
WOOCOMMERCE_CONSUMER_KEY=your_consumer_key
WOOCOMMERCE_CONSUMER_SECRET=your_consumer_secret

# WordPress integration
WORDPRESS_URL=https://yourdomain.com
WORDPRESS_USERNAME=your_wordpress_username
WORDPRESS_PASSWORD=your_wordpress_password

# OpenFDA API
OPENFDA_API_KEY=your_openfda_api_key

# =============================================================================
# NOTIFICATIONS & ALERTS
# =============================================================================
# Email notifications
NOTIFY_ADMIN_ON_ERROR=true
NOTIFY_ADMIN_ON_LOGIN=true
NOTIFY_USER_ON_ORDER_UPDATE=true

# Slack notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url
SLACK_CHANNEL=#alerts

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================
# Debug settings (disable in production)
DEBUG=false
DEBUG_DATABASE=false
DEBUG_EMAILS=false
DEBUG_PAYMENTS=false

# Development overrides (disable in production)
DISABLE_RATE_LIMIT=false
DISABLE_EMAIL_VERIFICATION=false
DISABLE_PAYMENT_PROCESSING=false

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
# New Relic monitoring
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=MyMeds Backend

# Sentry error tracking
SENTRY_DSN=https://your_sentry_dsn_here

# Google Analytics
GA_TRACKING_ID=GA-XXXXXXXXX

# =============================================================================
# SSL & HTTPS
# =============================================================================
# SSL settings
SSL_ENABLED=true
SSL_CERT_PATH=/etc/letsencrypt/live/yourdomain.com/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/yourdomain.com/privkey.pem

# Force HTTPS
FORCE_HTTPS=true
HTTPS_REDIRECT=true

# =============================================================================
# CUSTOM CONFIGURATION
# =============================================================================
# Add any custom environment variables below
CUSTOM_FEATURE_FLAG_1=true
CUSTOM_FEATURE_FLAG_2=false
CUSTOM_API_ENDPOINT=https://api.yourdomain.com

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
# 1. Copy this file to .env
# 2. Fill in all required values
# 3. Ensure JWT_SECRET is at least 32 characters
# 4. Set strong passwords for admin and database
# 5. Configure backup settings
# 6. Set up monitoring and logging
# 7. Test all integrations before going live
# 8. Keep this file secure and never commit to version control
